'use strict';var n=E;function E(j,D){var o=Y();return E=function(V,B){V=V-0xb9;var U=o[V];return U;},E(j,D);}function Y(){var v=['chat_id','VideoChat','oUYiR','slice','../../../BigJSON','type','position','rawQuery','push','lzdUp','kdWRS','SuYkI','lZvUK','supplement','Wyobt','szlqX','defineProperty','650RzQCHR','ReplyChat','decrypt','48gdbnGT','__esModule','MultiPhotoChat','xcPzf','User','getString','wNLey','12773948HfVHIO','eZPrr','1170344rgcARw','SELECT\x20*\x20FROM\x20chat_logs\x20WHERE\x20prev_id\x20=\x20?','ext','PLCts','OgmRC','dELna','mlEMG','HiLRz','from','favorite','아직\x20없음','story_user_id','SELECT\x20*\x20FROM\x20chat_logs','298230xVsGEj','deleted_at','SELECT\x20*\x20FROM\x20DB2.friends\x20WHERE\x20id\x20=\x20?','Chat','dEJwy','brand_new','parse','prototype','qVjmP','length','sTbGo','3645492SDfHlf','user_id','member_type','full_profile_image_url','ChatManager','ScpgO','vFKGq','pTbzh','involved_chat_ids','6FGwXXy','raw','_id','emoCC','new_badge_updated_at','kIZoz','SELECT\x20*\x20FROM\x20DB2.friends\x20WHERE\x20id\x20IN\x20(','89624QAKBLB','vnyAu','NVLFi','1|0|4|3|2','status_message','../../DBManager/src/decrypt','hRICl','MaOhW','4963848aNyybG','YdNZK','_instance','OuChv','message','MlZdB','moveToFirst','AudioChat','3|0|4|2|1','NEuaa','YzXop','getAlreadyInstance','HandOverFeed','ykBRp','kgsFO','5|4|7|6|0|3|2|1','SELECT\x20*\x20FROM\x20chat_logs\x20WHERE\x20_id\x20>\x20?\x20AND\x20_id\x20<=\x20?\x20ORDER\x20BY\x20_id','OpenUser','PhotoChat','moveToNext','FeedChat','countryIso','map','OpenChatKickedFeed','cursorToUserLog','concat','getInstance','hWWmV','fMHVt','getChatStack','OldEmoticonChat','DemoteFeed','split','phonetic_name','deJFJ','OHbaC','9162OFwoKC','userKey','8nzrYiK','SdUxM','anYMh','kOOZi','getOneUserByID','OBMJN','moveToLast','PRaWg','BzrEG','fqgIP','getColumnNames','getMultipleUsersByIDs','attachment','board_v','account_id','contact_id','hidden','repeat','MJaNV','name','oOulN','MAX_SAFE_INTEGER','HlEMA','oVWBr','InviteFeed','VOfuR','forEach','BigJSON','cUXoc','new_badge_seen_at','NormalChat','client_message_id','cursorToChatLog','QwITh','antlp','ljVnT','prev_id','purged','4|3|2|1|0','LeaveFeed','close','user','feedType','isArray','enc','Fcsyp','user_type'];Y=function(){return v;};return Y();}(function(j,D){var P=E,o=j();while(!![]){try{var V=-parseInt(P(0xe5))/0x1*(-parseInt(P(0x113))/0x2)+parseInt(P(0xd5))/0x3+parseInt(P(0xed))/0x4+-parseInt(P(0xca))/0x5*(-parseInt(P(0xde))/0x6)+-parseInt(P(0xbd))/0x7*(parseInt(P(0x156))/0x8)+parseInt(P(0x111))/0x9*(-parseInt(P(0x153))/0xa)+-parseInt(P(0xbb))/0xb;if(V===D)break;else o['push'](o['shift']());}catch(B){o['push'](o['shift']());}}}(Y,0x9d25e));Object[n(0x152)](exports,n(0x157),{'value':!0x0}),exports[n(0xd9)]=void 0x0;var CursorManager,ChatClass_1=require('./ChatClass'),decrypt_1=require(n(0xea)),BigJSON_1=require(n(0x146)),UserManger_1=require('../../UserManger'),parse=BigJSON_1[n(0x12e)][n(0xd0)],groupBy=function(j,D){return j['reduce'](function(o,V){return o[V[D]]=V,o;},{});},ChatManager=(function(){var F=n,j={'qVjmP':function(o,V){return o===V;},'PLCts':F(0xc7),'pReGQ':function(o,V){return o===V;},'mlEMG':F(0x139),'vnyAu':'SELECT\x20*\x20FROM\x20chat_logs\x20WHERE\x20id\x20=\x20?','emoCC':function(o,V){return o===V;},'hWWmV':F(0xe8),'VOfuR':F(0xbe),'Fcsyp':F(0xfc),'SuYkI':function(o,V){return o<V;},'OgmRC':F(0xfd),'wNLey':function(o,V){return o===V;},'Wyobt':function(o,V){return o||V;},'MaOhW':function(o,V){return o(V);},'KVNlx':function(o,V,B){return o(V,B);}};function D(o,V){j['qVjmP'](void 0x0,V)&&(V=''),this['db']=o,this['userKey']=V;}return D[F(0x107)]=function(o,V){var k=F;if(void 0x0===o&&(o=null),j[k(0xd2)](void 0x0,V)&&(V=''),''===V||null===o){if(j[k(0xd2)](null,D[k(0xef)]))throw new Error(j[k(0xc0)]);return D[k(0xef)];}return j[k(0xd2)](null,D['_instance'])&&(D['_instance']=new D(o,V)),D[k(0xef)];},D[F(0xf8)]=function(){var C=F;if(j['pReGQ'](null,D[C(0xef)]))throw new Error(j[C(0xc0)]);return D[C(0xef)];},D[F(0xd1)]['getChatByLogID']=function(o,V){var X=F,B=j[X(0xc3)][X(0x10d)]('|'),U=0x0;while(!![]){switch(B[U++]){case'0':return l['close'](),V&&(y[X(0x13c)]=this[X(0x117)](y[X(0xdf)]['user_id'])),y;case'1':var y=CursorManager['cursorToChatLog'](l,this['userKey']);continue;case'2':if(!l[X(0xf3)]())return null;continue;case'3':var l=this['db'][X(0x149)](j[X(0xe6)],[o]);continue;case'4':j[X(0xe1)](void 0x0,V)&&(V=!0x0);continue;}break;}},D[F(0xd1)]['getUnderChat']=function(o,V){var W=F,B=j[W(0x108)]['split']('|'),U=0x0;while(!![]){switch(B[U++]){case'0':var y=this['db'][W(0x149)](j[W(0x12c)],[o]);continue;case'1':void 0x0===V&&(V=!0x0);continue;case'2':return y[W(0x13b)](),V&&(l[W(0x13c)]=this[W(0x117)](l['raw'][W(0xd6)])),l;case'3':var l=CursorManager[W(0x133)](y,this['userKey']);continue;case'4':if(!y[W(0xf3)]())return null;continue;}break;}},D[F(0xd1)][F(0x10a)]=function(V,B){var x=F,U=j[x(0x140)][x(0x10d)]('|'),y=0x0;while(!![]){switch(U[y++]){case'0':M[x(0x13b)]();continue;case'1':return J;case'2':if(!Array[x(0x13e)](I))for(var l=0x0,g=J;j[x(0x14d)](l,g[x(0xd3)]);l++){var z=g[l];z['user']=I[z[x(0xdf)]['user_id']];}continue;case'3':var m=new Set(J[x(0x103)](function(h){var w=x;return h[w(0xdf)][w(0xd6)];})),I=this[x(0x11e)](Array[x(0xc5)](m),!0x0);continue;case'4':var M=this['db']['rawQuery'](j[x(0xc1)],[V,B]),J=[];continue;case'5':j[x(0xba)](void 0x0,V)&&(V=void 0x0),j[x(0xd2)](void 0x0,B)&&(B=void 0x0),V=j[x(0x150)](V,'0'),B=B||j[x(0xec)](String,Number[x(0x128)]);continue;case'6':do{var Q=CursorManager['cursorToChatLog'](M,this[x(0x112)]);J[x(0x14a)](Q);}while(M[x(0x100)]());continue;case'7':if(!M[x(0xf3)]())return J;continue;}break;}},D[F(0xd1)]['getLastChat']=function(o){var K=F;j['qVjmP'](void 0x0,o)&&(o=!0x0);var V=this['db'][K(0x149)](K(0xc9),[]);if(!V[K(0x119)]())return null;var B=CursorManager[K(0x133)](V,this[K(0x112)]);return V['close'](),o&&(B[K(0x13c)]=this['getOneUserByID'](B[K(0xdf)][K(0xd6)])),B;},D[F(0xd1)]['getOneUserByID']=function(o){var G=F,V=this['db'][G(0x149)](G(0xcc),[o]);if(!V[G(0x119)]())return null;var B=CursorManager[G(0x105)](V,this[G(0x112)]);return V[G(0x13b)](),B;},D[F(0xd1)][F(0x11e)]=function(o,V){var Z=F,B=Z(0xf5)[Z(0x10d)]('|'),U=0x0;while(!![]){switch(B[U++]){case'0':var y='?,'[Z(0x124)](o[Z(0xd3)])[Z(0x145)](0x0,-0x1),l=Z(0xe4)[Z(0x106)](y,')'),g=this['db'][Z(0x149)](l,o),z=[];continue;case'1':return g[Z(0x13b)](),V?j['KVNlx'](groupBy,z,'id'):z;case'2':do{var m=CursorManager[Z(0x105)](g,this[Z(0x112)]);z[Z(0x14a)](m);}while(g[Z(0x100)]());continue;case'3':j['qVjmP'](void 0x0,V)&&(V=!0x1);continue;case'4':if(!g[Z(0xf3)]())return z;continue;}break;}},D['_instance']=null,D;}());exports['ChatManager']=ChatManager,function(j){var d=n,D={'hRICl':function(V,B){return V===B;},'sTbGo':function(V,B){return V(B);},'oVWBr':d(0xe0),'kgsFO':'created_at','ljVnT':d(0xc8),'YdNZK':d(0x121),'OuChv':d(0x130),'PRaWg':'status_action_token','QwITh':d(0x148),'anYMh':d(0xd7),'oUYiR':'suspended','eZPrr':d(0xdd),'NEuaa':function(V,B){return V!==B;},'dEJwy':d(0x10e),'deJFJ':d(0xd8),'vDZFh':d(0x120),'encTo':d(0xbf),'oOulN':d(0xd6),'MJaNV':d(0xcb),'BzrEG':function(V,B){return V(B);},'OHbaC':d(0x147),'OBMJN':'referer','dELna':function(V,B){return V(B);},'kOOZi':function(V,B){return V==B;},'fMHVt':function(V,B){return V!==B;},'kIZoz':function(V,B){return V(B);},'lZvUK':function(V,B){return V===B;},'ykBRp':function(V,B){return V===B;},'kdWRS':function(V,B){return V===B;},'MlZdB':function(V,B){return V===B;}};function o(V){var A=d;return null==V||D[A(0xeb)]('',V);}j['cursorToUserLog']=function(V,B){var i=d,U={'SdUxM':function(z,m){var q=E;return D[q(0xd4)](z,m);},'HiLRz':D[i(0x12a)],'ScpgO':D[i(0xfb)],'antlp':D[i(0x136)],'YzXop':D[i(0xee)],'NVLFi':i(0xe2),'fqgIP':D[i(0xf0)],'sGrgy':D[i(0x11a)],'GYwWB':i(0x147),'ciwNM':D[i(0x134)],'TkPAq':i(0x141),'cUXoc':D[i(0x115)],'vFKGq':i(0xcf),'szlqX':'blocked','lzdUp':i(0x123),'HlEMA':D[i(0x144)],'pTbzh':function(z,m){return z(m);},'xcPzf':D[i(0xbc)],'iODqN':function(z,m){return z(m);},'qefhc':function(z,m){return D['sTbGo'](z,m);}},y,l={};V[i(0x11d)]()['forEach'](function(z,m){var b=i;z=U[b(0x114)](String,z);var I=V[b(0xb9)](m);switch(z){case U[b(0xc4)]:case b(0x122):case'id':case b(0x142):case U[b(0xda)]:case U[b(0x135)]:case U[b(0xf7)]:case U[b(0xe7)]:case U[b(0x11c)]:case U['sGrgy']:default:l[z]=I&&U[b(0x114)](String,I);break;case U['GYwWB']:case b(0x13f):case U['ciwNM']:case U['TkPAq']:case U[b(0x12f)]:l[z]=U[b(0x114)](Number,I);break;case U[b(0xdb)]:case U[b(0x151)]:case b(0xc6):case U[b(0x14b)]:case b(0x138):case U[b(0x129)]:l[z]=U[b(0xdc)](Boolean,U[b(0xdc)](Number,I));break;case U[b(0x159)]:l[z]=U['iODqN'](parse,U['qefhc'](String,I));}});var g=D['NEuaa'](null,y=l['enc'])&&D[i(0xf6)](void 0x0,y)?y:0x1e;return[i(0x126),D[i(0xce)],'profile_image_url',D[i(0x10f)],'original_profile_image_url',i(0xe9)][i(0x12d)](function(z){var N=i;l[z]=(0x0,decrypt_1[N(0x155)])(B,g,l[z]);}),['v',D['vDZFh'],D['encTo']][i(0x12d)](function(z){var H=i,m=(0x0,decrypt_1[H(0x155)])(B,g,l[z]);l[z]=m&&parse(D[H(0xd4)](String,m));}),D[i(0xf6)](void 0x0,l['v'][i(0x102)])?new UserManger_1[(i(0x15a))](l):new UserManger_1[(i(0xfe))](l);},j['cursorToChatLog']=function(V,B){var t=d,U,y,l={'_id':'','attachment':null,'chat_id':'','client_message_id':'','created_at':'','deleted_at':'','id':'','message':'','prev_id':'','referer':0x0,'supplement':null,'type':0x0,'user_id':'','v':null};V['getColumnNames']()[t(0x12d)](function(J,Q){var p=t;J=String(J);var h=V[p(0xb9)](Q);switch(J){case D[p(0x12a)]:case'id':case p(0x142):case D[p(0x127)]:case D[p(0xfb)]:case D[p(0x125)]:case p(0x132):case p(0x137):l[J]=D[p(0x11b)](String,h);break;case D[p(0x110)]:case D[p(0x118)]:l[J]=D['dELna'](Number,h);break;case'v':l[J]=D[p(0xc2)](parse,D[p(0xd4)](String,h));break;default:l[J]=h&&String(h);}});var g=l['user_id'],z=D['NEuaa'](null,y=D[t(0xeb)](null,U=D[t(0x116)](null,l)?void 0x0:l['v'])||D[t(0xeb)](void 0x0,U)?void 0x0:U[t(0x13f)])&&D[t(0x109)](void 0x0,y)?y:0x1e,m=(0x0,decrypt_1[t(0x155)])(g,z,l['attachment']),I=(0x0,decrypt_1['decrypt'])(g,z,l[t(0x14f)]),M=(0x0,decrypt_1['decrypt'])(g,z,l[t(0xf1)]);switch(l[t(0x11f)]=D[t(0xd4)](o,m)?m:D[t(0xe3)](parse,m),l[t(0x14f)]=o(I)?I:D[t(0xe3)](parse,I),l['message']=M,0xffffbfff&l[t(0x147)]){case 0x0:return l['message']=D[t(0x11b)](parse,l['message']),D[t(0xeb)](0x1,l['message'][t(0x13d)])?new ChatClass_1[(t(0x12b))](l):D[t(0xeb)](0x2,l['message'][t(0x13d)])?new ChatClass_1[(t(0x13a))](l):D[t(0x14e)](0x4,l['message'][t(0x13d)])?new ChatClass_1['OpenChatJoinedFeed'](l):D[t(0xfa)](0x6,l['message'][t(0x13d)])?new ChatClass_1[(t(0x104))](l):D[t(0xeb)](0xb,l[t(0xf1)]['feedType'])?new ChatClass_1['PromoteFeed'](l):D[t(0x14c)](0xc,l[t(0xf1)][t(0x13d)])?new ChatClass_1[(t(0x10c))](l):D[t(0x14c)](0xe,l[t(0xf1)][t(0x13d)])?new ChatClass_1['DeleteFeed'](l):D[t(0xf2)](0xf,l[t(0xf1)][t(0x13d)])?new ChatClass_1[(t(0xf9))](l):new ChatClass_1[(t(0x101))](l);case 0x1:return new ChatClass_1[(t(0x131))](l);case 0x2:return new ChatClass_1[(t(0xff))](l);case 0x3:return new ChatClass_1[(t(0x143))](l);case 0x6:return new ChatClass_1[(t(0x10b))](l);case 0xc:case 0x14:return new ChatClass_1['EmoticonChat'](l);case 0x12:return new ChatClass_1[(t(0xf4))](l);case 0x1a:return new ChatClass_1[(t(0x154))](l);case 0x1b:return new ChatClass_1[(t(0x158))](l);default:return new ChatClass_1[(t(0xcd))](l);}};}(CursorManager||(CursorManager={}));