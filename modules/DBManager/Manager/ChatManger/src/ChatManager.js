'use strict';var n=H;(function(b,S){var i=H,N=b();while(!![]){try{var y=parseInt(i(0x240))/0x1+parseInt(i(0x1c3))/0x2+-parseInt(i(0x1e0))/0x3+parseInt(i(0x1b5))/0x4+parseInt(i(0x1a8))/0x5+-parseInt(i(0x190))/0x6*(parseInt(i(0x211))/0x7)+-parseInt(i(0x1de))/0x8;if(y===S)break;else N['push'](N['shift']());}catch(M){N['push'](N['shift']());}}}(R,0x7a5d3));function R(){var j=['deleted_at','split','moveToFirst','eZFov','kCRcU','account_id','getAlreadyInstance','getOneRoomByID','is_hint','GXkTX','from','vlvBk','map','last_updated_at','LHpFN','OpenUser','referer','yUGwg','RriQL','SELECT\x20*\x20FROM\x20DB2.friends\x20WHERE\x20id\x20=\x20?','obHzl','itMtA','7haUxcH','_id','Bciiv','UQSQH','dUUeq','reduce','DeleteFeed','아직\x20없음','created_at','DOEeT','phonetic_name','includes','tDUOA','tkbbC','YOcKg','user_id','MAX_SAFE_INTEGER','0|2|4|3|1','feedType','rsiVH','cursorToRoomLog','watermarks','getInstance','last_message','jHhZQ','SELECT\x20*\x20FROM\x20chat_logs\x20WHERE\x20prev_id\x20=\x20?','ClUkj','brand_new','concat','../../RoomManger','decrypt','POAXC','userRefreshCursor','moveToNext','OldEmoticonChat','GJfXN','EDUTW','FRZHa','getChatByLogID','iBoDa','GsSwt','ChatManager','KAGMv','raw','PromoteFeed','original_profile_image_url','moveToLast','621928pZxCKw','jOGiz','blocked','FileChat','length','getUnderChat','PsIKE','geVsO','suspended','MapChat','parse','defineProperty','user_type','TPAXd','last_skey_token','ext','last_pk_tokens','purged','LBCHL','cursorToUserLog','EnNAh','qivsq','blinded_member_ids','GtEUk','rxSdf','getString','rawQuery','vZYqn','last_read_log_id','5833662lrZQsD','countryIso','message','MultiChat','cursorToChatLog','SELECT\x20*\x20FROM\x20chat_logs\x20WHERE\x20_id\x20>\x20?\x20AND\x20_id\x20<=\x20?\x20ORDER\x20BY\x20_id','OpenChatKickedFeed','new_badge_seen_at','YGNoh','srIBS','close','ZogpX','full_profile_image_url','board_v','KQToe','favorite','private_meta','YlHOl','involved_chat_ids','EQPuj','type','push','_instance','LGxIC','4219770jDQlWl','xTpnf','bEyqM','prev_id','getMembersByRoomID','members','dNqQf','meta','SELECT\x20*\x20FROM\x20DB2.friends\x20WHERE\x20id\x20IN\x20(','cfqlE','getOneUserByID','OpenRoom','../../../BigJSON','1601460yNLSML','last_chat_log_type','YhWIj','zXVSw','hidden','Odupl','__esModule','last_update_seen_id','zcshn','user','InviteFeed','PhotoChat','userKey','HandOverFeed','1869770kGCbPO','story_user_id','temporary_message','Chat','contact_id','unread_count','ccLEv','BaMGk','member_type','VUJaE','attachment','GBeuo','mute_until_at','SELECT\x20active_member_ids\x20FROM\x20chat_rooms\x20WHERE\x20id\x20=\x20?','SELECT\x20*\x20FROM\x20chat_rooms\x20WHERE\x20id\x20=\x20?','supplement','DirectChat','lMmoc','forEach','uFFBV','TMVhw','client_message_id','uXrlH','wJaya','qGcnr','1|0|5|7|3|2|6|4','fPKDu','8068840GhQWXQ','1|4|2|0|3','957141Efahke','VideoChat','AKvHv','status_message','SELECT\x20*\x20FROM\x20chat_logs','invite_info','enc','xrSGd','kZkwv','chat_id','prototype','getMultipleUsersByIDs','SELECT\x20*\x20FROM\x20chat_logs\x20WHERE\x20id\x20=\x20?','active_member_ids','profile_image_url','getColumnNames','name','isArray','EMusl','IwaDV','bxXLD','FeedChat','ReplyChat','Amnlq','SQDkP','LONsj','last_log_id'];R=function(){return j;};return R();}Object[n(0x17e)](exports,n(0x1bb),{'value':!0x0}),exports[n(0x23a)]=void 0x0;var CursorManager,ChatClass_1=require('./ChatClass'),decrypt_1=require('../../DBManager/src/decrypt'),BigJSON_1=require(n(0x1b4)),UserManger_1=require('../../UserManger'),parse=BigJSON_1['BigJSON'][n(0x24a)],RoomManger_1=require(n(0x22e)),groupBy=function(b,S){var J=n;return b[J(0x216)](function(N,y){return N[y[S]]=y,N;},{});},ChatManager=(function(){var d=n,b={'AKvHv':function(N,M){return N===M;},'BaMGk':function(N,M){return N===M;},'gaCSl':d(0x218),'EMusl':d(0x1df),'KAGMv':function(N,M){return N===M;},'FlLlR':d(0x1ec),'LONsj':'0|1|4|2|3','GxssG':d(0x22a),'iBoDa':function(N,M){return N||M;},'geVsO':function(N,y){return N(y);},'kXLyR':function(N,M){return N<M;},'nyEWq':d(0x222),'MXsSU':function(N,M){return N===M;},'PsIKE':d(0x20e),'wJaya':'2|4|0|1|3','jOGiz':function(N,M){return N===M;},'dTfFg':function(N,y,M){return N(y,M);},'qivsq':d(0x1b0),'xTpnf':d(0x1d1)};function S(N,y){var f=d;b['AKvHv'](void 0x0,y)&&(y=''),this['db']=N,this[f(0x1c1)]=y;}return S[d(0x227)]=function(N,y){var g=d;if(void 0x0===N&&(N=null),b[g(0x1e2)](void 0x0,y)&&(y=''),b['AKvHv']('',y)||b[g(0x1e2)](null,N)){if(b[g(0x1e2)](null,S[g(0x1a6)]))throw new Error(g(0x218));return S['_instance'];}return b[g(0x1e2)](null,S[g(0x1a6)])&&(S[g(0x1a6)]=new S(N,y)),S[g(0x1a6)];},S[d(0x201)]=function(){var q=d;if(b[q(0x1ca)](null,S[q(0x1a6)]))throw new Error(b['gaCSl']);return S[q(0x1a6)];},S['prototype'][d(0x237)]=function(N,y){var O=d,M=b[O(0x1f2)][O(0x1fc)]('|'),u=0x0;while(!![]){switch(M[u++]){case'0':var X=CursorManager[O(0x194)](V,this[O(0x1c1)]);continue;case'1':b[O(0x23b)](void 0x0,y)&&(y=!0x0);continue;case'2':if(!V[O(0x1fd)]())return null;continue;case'3':return V[O(0x19a)](),y&&(X[O(0x1be)]=this['getOneUserByID'](X[O(0x23c)][O(0x220)])),X;case'4':var V=this['db'][O(0x18d)](b['FlLlR'],[N]);continue;}break;}},S['prototype'][d(0x245)]=function(N,y){var E=d,M=b[E(0x1f9)][E(0x1fc)]('|'),u=0x0;while(!![]){switch(M[u++]){case'0':b['AKvHv'](void 0x0,y)&&(y=!0x0);continue;case'1':var X=this['db']['rawQuery'](b['GxssG'],[N]);continue;case'2':var V=CursorManager['cursorToChatLog'](X,this['userKey']);continue;case'3':return X[E(0x19a)](),y&&(V[E(0x1be)]=this[E(0x1b2)](V[E(0x23c)][E(0x220)])),V;case'4':if(!X[E(0x1fd)]())return null;continue;}break;}},S[d(0x1ea)]['_runQuery']=function(N,y){var w=d,M=this['db'][w(0x18d)](N,y);if(!M[w(0x1fd)]())return null;var u=CursorManager['cursorToChatLog'](M,this[w(0x1c1)]);return M['close'](),u;},S[d(0x1ea)]['getChatStack']=function(N,y){var l=d,M=l(0x1dc)['split']('|'),X=0x0;while(!![]){switch(M[X++]){case'0':var V=this['db']['rawQuery'](l(0x195),[N,y]),P=[];continue;case'1':b[l(0x1e2)](void 0x0,N)&&(N=void 0x0),void 0x0===y&&(y=void 0x0),N=b[l(0x238)](N,'0'),y=y||b[l(0x247)](String,Number[l(0x221)]);continue;case'2':var C=new Set(P[l(0x207)](function(A){var U=l;return A['raw'][U(0x220)];})),I=this['getMultipleUsersByIDs'](Array[l(0x205)](C),!0x0);continue;case'3':V[l(0x19a)]();continue;case'4':return P;case'5':if(!V[l(0x1fd)]())return P;continue;case'6':if(!Array[l(0x1f1)](I))for(var K=0x0,B=P;b['kXLyR'](K,B[l(0x244)]);K++){var G=B[K];G[l(0x1be)]=I[G[l(0x23c)][l(0x220)]];}continue;case'7':do{var D=CursorManager[l(0x194)](V,this['userKey']);P[l(0x1a5)](D);}while(V[l(0x232)]());continue;}break;}},S[d(0x1ea)]['getLastChat']=function(N){var k=d,y=b['nyEWq']['split']('|'),M=0x0;while(!![]){switch(y[M++]){case'0':b['MXsSU'](void 0x0,N)&&(N=!0x0);continue;case'1':return u[k(0x19a)](),N&&(X['user']=this[k(0x1b2)](X[k(0x23c)]['user_id'])),X;case'2':var u=this['db'][k(0x18d)](k(0x1e4),[]);continue;case'3':var X=CursorManager[k(0x194)](u,this[k(0x1c1)]);continue;case'4':if(!u[k(0x23f)]())return null;continue;}break;}},S[d(0x1ea)][d(0x1b2)]=function(N){var t=d,y=this['db'][t(0x18d)](b[t(0x246)],[N]);if(!y['moveToLast']())return null;var M=CursorManager['cursorToUserLog'](y,this['userKey']);return y['close'](),M;},S[d(0x1ea)][d(0x1eb)]=function(N,y){var c=d,M=b[c(0x1da)][c(0x1fc)]('|'),u=0x0;while(!![]){switch(M[u++]){case'0':if(!C['moveToFirst']())return I;continue;case'1':do{var X=CursorManager[c(0x186)](C,this['userKey']);I[c(0x1a5)](X);}while(C['moveToNext']());continue;case'2':b[c(0x241)](void 0x0,y)&&(y=!0x1);continue;case'3':return C['close'](),y?b['dTfFg'](groupBy,I,'id'):I;case'4':var V='?,'['repeat'](N[c(0x244)])['slice'](0x0,-0x1),P=b[c(0x188)][c(0x22d)](V,')'),C=this['db'][c(0x18d)](P,N),I=[];continue;}break;}},S[d(0x1ea)][d(0x202)]=function(N){var p=d,y=this['db'][p(0x18d)](b[p(0x1a9)],[N]);if(!y[p(0x23f)]())return null;var M=CursorManager[p(0x225)](y,this[p(0x1c1)]);return y[p(0x19a)](),M;},S[d(0x1ea)][d(0x1ac)]=function(N){var L=d,y=this['db'][L(0x18d)](L(0x1d0),[N]);if(!y['moveToLast']())return null;var M=CursorManager['userRefreshCursor'](y);return y[L(0x19a)](),this[L(0x1eb)](M);},S[d(0x1a6)]=null,S;}());function H(b,S){var N=R();return H=function(y,M){y=y-0x17e;var u=N[y];return u;},H(b,S);}exports[n(0x23a)]=ChatManager,function(b){var x=n,S={'LGxIC':function(M,u){return M==u;},'RriQL':function(M,u){return M===u;},'Amnlq':function(y,M){return y(M);},'rxSdf':x(0x212),'EnNAh':x(0x1c7),'rsiVH':x(0x1e9),'srIBS':x(0x1c4),'yveQx':x(0x200),'Bciiv':'new_badge_updated_at','uXrlH':x(0x197),'LBCHL':'status_action_token','GsSwt':function(y,M){return y(M);},'zXVSw':x(0x1a4),'temHz':x(0x1e6),'SQDkP':'position','FRZHa':x(0x17f),'kCRcU':x(0x1cb),'YlHOl':x(0x22c),'szpsB':x(0x242),'Odupl':x(0x19f),'tDUOA':x(0x184),'vQACX':x(0x1a2),'xrSGd':function(y,M){return y(M);},'YhWIj':function(M,u){return M!==u;},'ClUkj':x(0x1f0),'IwaDV':x(0x21b),'TMVhw':x(0x1ee),'ZogpX':x(0x19c),'KQToe':x(0x23e),'bEyqM':x(0x19d),'fPKDu':'ext','YGNoh':function(y,M){return y(M);},'obHzl':x(0x220),'LtwMz':x(0x219),'FHfiN':x(0x1fb),'CBVpC':x(0x1d8),'GJfXN':x(0x1ab),'SXWyl':x(0x20b),'ccLEv':function(y,M){return y(M);},'EQPuj':function(y,M){return y(M);},'LHpFN':function(M,u){return M===u;},'UQSQH':function(y,M){return y(M);},'bxXLD':function(y,M){return y(M);},'VUJaE':function(M,u){return M&u;},'dNqQf':function(y,M){return y(M);},'kZkwv':function(M,u){return M===u;},'DOEeT':function(M,u){return M===u;},'GBeuo':function(M,u){return M===u;},'cOFYD':function(M,u){return M===u;},'FkxKc':function(y,M){return y(M);},'GXkTX':x(0x18f),'YyuLy':x(0x1bc),'POAXC':x(0x208),'zcshn':'schat_token','vZYqn':'link_id','EDUTW':'last_joined_log_id','UnbfO':x(0x1cf),'qGcnr':x(0x1c8),'GtEUk':'active_members_count','SYKyk':x(0x1b6),'uFFBV':function(y,M){return y(M);},'VjBLA':x(0x203),'jHhZQ':function(y,M){return y(M);},'dunVQ':x(0x1c5),'YOcKg':x(0x1ad),'yUGwg':x(0x226),'eZFov':'moim_meta','dUUeq':x(0x183),'TPAXd':x(0x1e5),'lMmoc':x(0x189),'cfqlE':function(y,M){return y(M);},'vlvBk':x(0x1d3),'tkbbC':function(M,u){return M<u;},'dGLxE':function(y,M){return y(M);}};function N(y){var o=x;return S[o(0x1a7)](null,y)||S[o(0x20d)]('',y);}b['cursorToUserLog']=function(y,M){var Q=x,u={'itMtA':function(C,I){var v=H;return S[v(0x1e7)](C,I);}},X,V={};y[Q(0x1ef)]()['forEach'](function(C,I){var T=Q;C=S[T(0x1f7)](String,C);var K=y[T(0x18c)](I);switch(C){case S[T(0x18b)]:case S[T(0x187)]:case'id':case S[T(0x224)]:case T(0x219):case S[T(0x199)]:case S['yveQx']:case S[T(0x213)]:case S[T(0x1d9)]:case S[T(0x185)]:default:V[C]=K&&S[T(0x239)](String,K);break;case S[T(0x1b8)]:case S['temHz']:case S[T(0x1f8)]:case S[T(0x236)]:case S[T(0x1ff)]:V[C]=Number(K);break;case S[T(0x1a1)]:case S['szpsB']:case S[T(0x1ba)]:case T(0x1b9):case S[T(0x21d)]:case T(0x248):V[C]=S[T(0x239)](Boolean,S[T(0x1f7)](Number,K));break;case S['vQACX']:V[C]=S[T(0x1e7)](parse,String(K));}});var P=S[Q(0x1b7)](null,X=V[Q(0x1e6)])&&S[Q(0x1b7)](void 0x0,X)?X:0x1e;return[S[Q(0x22b)],S[Q(0x1f3)],S[Q(0x1d7)],S[Q(0x19b)],S[Q(0x19e)],Q(0x1e3)][Q(0x1d5)](function(C){var r=Q;V[C]=(0x0,decrypt_1[r(0x22f)])(M,P,V[C]);}),['v',S[Q(0x1aa)],S[Q(0x1dd)]][Q(0x1d5)](function(C){var h=Q,I=(0x0,decrypt_1[h(0x22f)])(M,P,V[C]);V[C]=I&&u[h(0x210)](parse,u[h(0x210)](String,I));}),void 0x0!==V['v'][Q(0x191)]?new UserManger_1['User'](V):new UserManger_1[(Q(0x20a))](V);},b['cursorToChatLog']=function(y,M){var s=x,X,V,P={'_id':'','attachment':null,'chat_id':'','client_message_id':'','created_at':'','deleted_at':'','id':'','message':'','prev_id':'','referer':0x0,'supplement':null,'type':0x0,'user_id':'','v':null};y[s(0x1ef)]()[s(0x1d5)](function(D,A){var z=s;D=S[z(0x198)](String,D);var F=y['getString'](A);switch(D){case S[z(0x18b)]:case'id':case z(0x1e9):case S[z(0x20f)]:case S['LtwMz']:case S['FHfiN']:case S['CBVpC']:case S[z(0x234)]:P[D]=S[z(0x1f7)](String,F);break;case S[z(0x1b8)]:case S['SXWyl']:P[D]=S[z(0x198)](Number,F);break;case'v':P[D]=S[z(0x1c9)](parse,S[z(0x1a3)](String,F));break;default:P[D]=F&&S[z(0x1f7)](String,F);}});var C=P[s(0x220)],I=null!==(V=S[s(0x20d)](null,X=S[s(0x1a7)](null,P)?void 0x0:P['v'])||S[s(0x209)](void 0x0,X)?void 0x0:X[s(0x1e6)])&&void 0x0!==V?V:0x1e,K=(0x0,decrypt_1[s(0x22f)])(C,I,P[s(0x1cd)]),B=(0x0,decrypt_1[s(0x22f)])(C,I,P[s(0x1d2)]),G=(0x0,decrypt_1[s(0x22f)])(C,I,P[s(0x192)]);switch(P[s(0x1cd)]=S[s(0x214)](N,K)?K:S[s(0x1f4)](parse,K),P[s(0x1d2)]=S[s(0x1f7)](N,B)?B:parse(B),P['message']=G,S[s(0x1cc)](0xffffbfff,P['type'])){case 0x0:return P[s(0x192)]=S[s(0x1ae)](parse,P[s(0x192)]),S[s(0x1e8)](0x1,P[s(0x192)][s(0x223)])?new ChatClass_1[(s(0x1bf))](P):S[s(0x21a)](0x2,P[s(0x192)][s(0x223)])?new ChatClass_1['LeaveFeed'](P):0x4===P['message'][s(0x223)]?new ChatClass_1['OpenChatJoinedFeed'](P):S[s(0x20d)](0x6,P[s(0x192)][s(0x223)])?new ChatClass_1[(s(0x196))](P):S[s(0x20d)](0xb,P[s(0x192)]['feedType'])?new ChatClass_1[(s(0x23d))](P):S[s(0x1ce)](0xc,P['message']['feedType'])?new ChatClass_1['DemoteFeed'](P):0xe===P['message']['feedType']?new ChatClass_1[(s(0x217))](P):S['cOFYD'](0xf,P[s(0x192)][s(0x223)])?new ChatClass_1[(s(0x1c2))](P):new ChatClass_1[(s(0x1f5))](P);case 0x1:return new ChatClass_1['NormalChat'](P);case 0x2:return new ChatClass_1[(s(0x1c0))](P);case 0x3:return new ChatClass_1[(s(0x1e1))](P);case 0x5:return new ChatClass_1['AudioChat'](P);case 0x6:return new ChatClass_1[(s(0x233))](P);case 0xc:case 0x14:case 0x19:return new ChatClass_1['EmoticonChat'](P);case 0x10:return new ChatClass_1[(s(0x249))](P);case 0x12:return new ChatClass_1[(s(0x243))](P);case 0x1a:return new ChatClass_1[(s(0x1f6))](P);case 0x1b:return new ChatClass_1['MultiPhotoChat'](P);default:return new ChatClass_1[(s(0x1c6))](P);}},b[x(0x231)]=function(y){var W=x;return S['FkxKc'](parse,y[W(0x18c)](0x0));},b[x(0x225)]=function(y,M){var m=x,u={};y['getColumnNames']()[m(0x1d5)](function(V,P){var a=m;V=S['FkxKc'](String,V);var C=y[a(0x18c)](P);switch(V){case S[a(0x18b)]:case'id':case a(0x1fa):case S[a(0x204)]:case S['YyuLy']:case S[a(0x230)]:case S[a(0x1bd)]:case a(0x181):case S[a(0x18e)]:case S[a(0x235)]:case S['UnbfO']:u[V]=C?String(C):null;break;case S[a(0x1db)]:case S[a(0x18a)]:case S['SYKyk']:u[V]=C?S[a(0x1d6)](Number,C):null;break;case S['VjBLA']:u[V]=C?S[a(0x229)](Boolean,Number(C)):null;break;case S['dunVQ']:case'v':case'supplement':case a(0x182):case S[a(0x21f)]:case a(0x1ed):case S[a(0x20c)]:case a(0x1af):case a(0x1a0):case S[a(0x1fe)]:case S[a(0x215)]:case S[a(0x180)]:case S[a(0x1d4)]:u[V]=C&&S[a(0x1b1)](parse,S[a(0x1ae)](String,C));break;default:u[V]=C&&String(C);}});var X=u['v'][m(0x1e6)];return u['last_message']=(0x0,decrypt_1[m(0x22f)])(M,X,u[m(0x228)]),[S[m(0x206)],m(0x193)][m(0x21c)](u[m(0x1a4)])?new RoomManger_1['Room'](u):new RoomManger_1[(m(0x1b3))](u);},b['cursorToOnlyID']=function(y,M){var e=x;for(var u=y['getColumnNames'](),X=0x0;S[e(0x21e)](X,u[e(0x244)]);X++)if(S['dGLxE'](String,u[X])===M)return y[e(0x18c)](X);};}(CursorManager||(CursorManager={}));